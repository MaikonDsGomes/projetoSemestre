<!DOCTYPE html>
<html lang="pt-br">

<head>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="assets/logo.ico" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="css/simulador_emp.css">

</head>





<div id="modal_erro" class="modal_erro">
    <div class="flex">

        <span class="close_erro">&times;</span>

        <div class="erro_box">
            <p class="erro_titulo">Algo deu errado</p>
            <div class="erro_texto">

                <p id="mensagem_erro">Ops! Algo de errado verifique o campo <span id="alerta_modal"></span></p>

            </div>
        </div>
    </div>
</div>



<body>

    <section id="menu_sec" class="menu_sec">

        <header class="menu">
            <div class="centro">
                <h2>Jiu <span>Connect</span></h2>

                <ul class="lista_menu">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="#">Sobre</a></li>
                    <li><a href="#">Contato</a></li>
                    <li><span>|</span></li>
                    <li><a href="login.html">Login</a></li>
                    <li><a href="cadastro.html">Cadastro</a></li>
                </ul>
            </div>

        </header>
    </section>



    <section id="simulador_sec" class="simulador_sec">
        <h1>Faça uma simulação</h1>
        <div class="centro">
            <div class="calculadora_box">
                <i onclick="abrir_modal()" class="fa-solid fa-circle-info"></i>
                <div class="form_box">
                    
                    
                    <form>
                        <label>Nome da empresa</label>
                        <input type="text" id="input_nomeEmp"
                            placeholder="Digite o nome da empresa interessada em patrocinar">

                        <label>Ramo da empresa</label>
                        <input placeholder="Digite o ramo da empresa" type="text" id="input_ramo">

                        <label>Email do representante</label>
                        <input type="text" id="input_email" placeholder="Digite o email do representante da empresa ">

                        <label>Apoio financeiro</label>
                        <select id="select_apoio">
                            <option value="0.2">20%</option>
                            <option value="0.4">40%</option>
                            <option value="0.6">60%</option>
                            <option value="0.8">80%</option>
                            <option value="1">100%</option>
                        </select>

                        <label>Periodo</label>
                        <select id="select_periodo">
                            <option value="mes">Meses</option>
                            <option value="ano">Anos</option>
                        </select>
                        <input id="input_periodo" placeholder="Digite o periodo aqui" type="number">

                        <label for="orcamento">Orçamento:</label>
                        <input placeholder="R$" type="number" id="input_orcamento">


                        <label>Nivel profissional do atleta</label>
                        <select id="select_alcance">
                            <option value="estadual">Estadual</option>
                            <option value="nacional">Nacional</option>
                            <option value="internacional">Internacional</option>
                            <option value="mundial">Mundial</option>

                        </select>
                        
                    </form>
                    <button onclick="simular()">Simular</button>
                </div>

            </div>

            <div style="display: none;" id="resumo_box" class="resumo_box">

                <h2>Resultado</h2>

                <h4 id="msg"></h4>

            </div>
        </div>

    </section>
    <div id="modal" class="modal">
        <div class="flex">

            <div class="">
                <h2 class="">faça uma simulação</h2>
                <div class="txt_informativo_box">

                    <p>
                        <span><i class="fa-regular fa-clipboard"></i></span> Preencha seus Dados: Comece inserindo o
                        nome da sua empresa e o e-mail do
                        representante responsável
                        pelo patrocínio. Isso nos ajudará a entrar em contato com você com os resultados da sua análise.
                    </p>
                    <p>
                        <span><i class="fa-solid fa-bullseye"></i></span> Defina seu Orçamento: Em seguida, indique
                        quanto deseja gastar em patrocínio
                        esportivo. Você pode
                        inserir um valor específico ou definir um limite máximo para o seu investimento.
                    </p>

                    <p>
                        <span><i class="fa-solid fa-check"></i></span> Escolha seu Alcance: Selecione o nível de alcance
                        desejado para sua campanha
                        de
                        patrocínio:
                        nacional, estadual ou internacional. Isso nos ajudará a calcular o potencial de exposição e
                        impacto
                        da sua marca.
                    </p>
                    <p>
                        <span><i class="fa-solid fa-hand-holding-heart"></i></span> Receba seus Resultados: Após
                        preencher essas informações, nossa calculadora
                        fornecerá uma análise
                        personalizada do potencial de retorno sobre o investimento.
                    </p>

                </div>
                <button class="close">Fechar</button>
            </div>
        </div>
    </div>

</body>

</html>

<script>

    // Modal informativo
    

    window.onload = function () {
        abrir_modal();
    };

    document.querySelector('.close').addEventListener('click', function () {
        document.getElementById('modal').style.display = 'none';
        simulador_sec.style.display = 'block';
        menu_sec.style.display = 'block';
    });



    function abrir_modal() {
        document.getElementById('modal').style.display = 'block';
        simulador_sec.style.display = 'none';
        menu_sec.style.display = 'none';
    }


    function simular() {
        var nome = input_nomeEmp.value
        var ramo = input_ramo.value;
        var email = input_email.value;
        var periodo = Number(input_periodo.value)
        var orcamento = Number(input_orcamento.value);
        var viabilidade = 0;
        var periodoChk = select_periodo.value;
        var erro = false;

        // Validações
        var indice_arroba = email.indexOf('@');
        var indice_ponto = email.lastIndexOf('.');

        if (indice_arroba < 0 || indice_ponto < 0) {
            modal_erro.style.display = 'block';
            alerta_modal.innerHTML = `email, está incorreto!`;
            erro = true;
        }

        if (orcamento < 1) {
            modal_erro.style.display = 'block';
            alerta_modal.innerHTML = `orçamento, preencha este campo corretamente!`;
            erro = true;
        }
        if (periodo < 1) {
            modal_erro.style.display = 'block';
            alerta_modal.innerHTML = `periodo, preencha este campo corretamente!`;
            erro = true;
        }

        document.querySelector('.close_erro').addEventListener('click', function () {
            document.getElementById('modal_erro').style.display = 'none';
        });

        // FIM VALIDAÇÕES


        if (input_periodo.value == null) {
            alert("Digite o período da simulação");
        }
        if (periodoChk == "ano") {
            periodo = periodo * 12
            console.log(`${periodo} em meses`)
        }
        if (periodoChk == "mes") {
            var periodo = Number(input_periodo.value)
        }

        var gastoEstadual = 2900 / 12;
        var gastoNacional = 4350 / 12;
        var gastoInternacional = 8850 / 12;
        var gastoMundial = 15000 / 12;


        var alcance = select_alcance.value;
        var apoio = select_apoio.value

        // o quanto pode patrocinar mensalmente
        var poderPatrocinio = orcamento / periodo;
        var qtdAtletas = 0;


        if (alcance == "estadual") {
            viabilidade = (gastoEstadual * apoio) - poderPatrocinio
            qtdAtletas = poderPatrocinio / (gastoEstadual * apoio)
        } else if (alcance == "nacional") {
            viabilidade = (gastoNacional * apoio) - poderPatrocinio
            qtdAtletas = poderPatrocinio / (gastoNacional * apoio)
        } else if (alcance == "internacional") {
            viabilidade = (gastoInternacional * apoio) - poderPatrocinio
            qtdAtletas = poderPatrocinio / (gastoInternacional * apoio)
        } else if (alcance == "mundial") {
            viabilidade = (gastoMundial * apoio) - poderPatrocinio
            qtdAtletas = poderPatrocinio / (gastoMundial * apoio)
        }

        if (viabilidade < 1) {
            viabilidadeChk = true
        } else {
            viabilidadeChk = false
        }





        //MSG RUIN
        if (viabilidadeChk == false && erro == false) {
            resumo_box.style.display = 'block'
            viabilidade = Math.abs(viabilidade) * periodo

            msg.innerHTML = `Você não conseguiu alcançar seu objetivo, não será possivel patrocinar um atletas no periodo de ${periodo} meses com bolsa cobrindo ${apoio * 100}% dos custos do atleta <br><br>
            Para alcançar seu objetivo de patrocinar um atleta de nivel ${alcance}, falta cerca de R$${viabilidade.toFixed(2)} reais`


            // console.log(viabilidade)
        } else if (viabilidadeChk == true && erro == false) {

            resumo_box.style.display = 'block'
            msg.innerHTML = `
            Você conseguiu alcançar seu objetivo! 
            Durante ${periodo} meses com uma bolsa cobrindo ${apoio * 100}% os custos do atleta <br><br>
            Sua empresa no ramo ${ramo} terá grandes chances de alcançar visbilidade <span class="spn_msg"> ${alcance}mente </span> <br><br>
            será possivel patrocinar cerca de <span class="spn_msg"> ${qtdAtletas.toFixed(0)} atletas </span>
            `
        }







    }
    
    
    // Mostrar quantidade de atletas que consegue patrocinar

</script>